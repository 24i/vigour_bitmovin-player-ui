/*
 * Copyright (C) 2016, bitmovin GmbH, All Rights Reserved
 *
 * Authors: Mario Guggenberger <mario.guggenberger@bitmovin.com>
 *
 * This source code and its use and distribution, is subject to the terms
 * and conditions of the applicable license agreement.
 */

@import '../variables';

%ui-seekbar {
  @extend %ui-component;

  font-size: 1em;
  height: 1em;
  margin: .2em;
  position: relative;
  width: 100%;

  $bar-inset: .44em;

  .seekbar {
    height: 100%;
    position: relative;
    //background-color: lighten($color-background, 10%);

    %bar {
      bottom: 0;
      left: 0;
      position: absolute;
      right: auto;
      top: 0;
    }

    %positionmarker-horizontal {
      background-color: $color-highlight;
      margin: $bar-inset 0;

      .seekbar-playbackposition-marker {
        background-image: svg('assets/skin-modern/images/dot-play.svg');
        background-position: center;
        background-repeat: no-repeat;
        background-size: 1.3em;
        height: 1em;
        position: absolute;
        right: -.5em;
        top: -.5em + (.5em - $bar-inset);
        width: 1em;
      }
    }

    .seekbar-backdrop {
      @extend %bar;
      background-color: lighten($color-background, 20%);
      margin: $bar-inset 0;
      width: 100%;
    }

    .seekbar-bufferlevel {
      @extend %bar;
      background-color: $color-primary;
      margin: $bar-inset 0;
      transition: width .3s linear, height .3s linear;
    }

    .seekbar-seekposition {
      @extend %bar;
      background-color: transparentize($color-primary, .8);
      margin: $bar-inset 0;
    }

    .seekbar-playbackposition {
      @extend %bar;
      @extend %positionmarker-horizontal;
      transition: width .1s linear, height .1s linear;
    }
  }

  // disable animations during seeks
  &.seeking {
    .seekbar {
      .seekbar-bufferlevel,
      .seekbar-playbackposition {
        transition: none;
      }
    }
  }

  &.vertical {
    .seekbar {
      //overflow-y: hidden;
      height: 100%;
      width: auto;

      %bar-vertical {
        right: 0;
        top: auto;
      }

      %positionmarker-vertical {
        @extend %positionmarker-horizontal;

        .seekbar-playbackposition-marker {
          height: 1em;
          top: -0.5em;
          width: 100%;
        }
      }

      .seekbar-backdrop {
        @extend %bar-vertical;

        height: 100%;
        margin: 0 $bar-inset;
        width: auto;
      }

      .seekbar-bufferlevel {
        @extend %bar-vertical;

        margin: 0 $bar-inset;
      }

      .seekbar-seekposition {
        @extend %bar-vertical;

        margin: 0 $bar-inset;
      }

      .seekbar-playbackposition {
        @extend %bar-vertical;
        @extend %positionmarker-vertical;
      }
    }
  }
}

.ui-seekbar {
  @extend %ui-seekbar;
}
